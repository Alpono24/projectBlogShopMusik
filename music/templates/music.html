{% extends "base.html" %}
{% load static %}
{% block title %}–ú—É–∑—ã–∫–∞{% endblock %}
{% block content %}
<div class="wrapper wrapper_music">
    <h1 class="title_page title_page_music">{{ title }}</h1>

   <!-- –ü–û–õ–ï –ü–û–ò–°–ö–ê –ü–ï–°–ù–ò –°–¢–ê–†–¢ -->
    <form method="get" class="search-form">
        <div class="search-container">
            <input type="text" name="q" value="{{ request.GET.q }}" placeholder="–ß—Ç–æ —Ö–æ—á–µ—à—å –≤–∫–ª—é—á–∏—Ç—å?"
                   class="search-input">
            <button class="search-button" type="submit">üîç –ù–∞–π—Ç–∏</button>
        </div>
    </form>
   <!-- –ü–û–õ–ï –ü–û–ò–°–ö–ê –ü–ï–°–ù–ò –§–ò–ù–ò–® -->

    <!-- –§–ò–õ–¨–¢–† –ü–û –ñ–ê–ù–†–ê–ú –°–¢–ê–†–¢ -->
        <div class="music_category__styles">
            <strong>–ñ–∞–Ω—Ä—ã:</strong>
            <a class="music__category_buttons" href="{% url 'music:music' %}">–í—Å–µ</a>
            {% if genres %}
                {% for genre in genres %}
                    <a class="music__category_buttons" href="?genre={{ genre.id }}">
                        {{ genre.name }}
                    </a>
                {% endfor %}
            {% else %}
                <p>–ù–µ—Ç –∂–∞–Ω—Ä–æ–≤</p>
            {% endif %}
        </div>
    <!-- –§–ò–õ–¨–¢–† –ü–û –ñ–ê–ù–†–ê–ú –§–ò–ù–ò–® -->







    <!-- –°–ü–ò–°–û–ö –ü–ï–°–ï–ù –°–¢–ê–†–¢ -->
    <h2 class="music__best-track">–ü–æ–ø—É–ª—è—Ä–Ω—ã–µ —Ç—Ä–µ–∫–∏</h2>
    <div class="music__cards-wrapper">
        {% for song in songs %}
            <div class="music__card-wrapper">
                    <div class="music__imgs-wrapper">
                        {% if song.album.cover %}
                            <img class="music__img_song" src="{{ song.album.cover.url }}" 
                                 alt="{{ song.title}}">
                        {% else %}
                            <img class="music__img_song" src="{% static 'no-image.png' %}" alt="–ù–µ—Ç –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è">
                        {% endif %}
                    </div>
                    <div class="music__song-wrapper">
                        <div class="music__info_song">
                            <h5 class="music__song-title">{{ song.title }}</h5>
                            <p class="music__song-info">
<!--                                <strong class="music__song-album"></strong> {{ song.album.title }} <br>-->
                                <strong class="music__song-artist"></strong> {{ song.artist.name}} <br>

<!--                                <strong class="music__song-genre">–ñ–∞–Ω—Ä:</strong> {{ song.genre.name }}-->
                            </p>
                            {% if song.audio_file %}
                                <audio  class="music__song-audio" controls preload="none">
                                    <source src="{{ song.audio_file.url }}" type="audio/mpeg">
                                    –í–∞—à –±—Ä–∞—É–∑–µ—Ä –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –∞—É–¥–∏–æ.
                                </audio>
                            {% else %}
                                <p class="music__song-audio-absent">–ê—É–¥–∏–æ—Ñ–∞–π–ª –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç</p>
                            {% endif %}
                        </div>
                    </div>
                
            </div>
        {% empty %}
            <p class="music__no-songs-available">–¢—É—Ç —Ç–∞–∫–æ–≥–æ –Ω–µ—Ç –µ—â—ë.</p>
        {% endfor %}
    </div>
    <!-- –°–ü–ò–°–û–ö –ü–ï–°–ï–ù –§–ò–ù–ò–®–¨ -->




     <!-- –ê–õ–¨–ë–û–ú–´ –§–ò–ù–ò–® -->
    <h2 class="music__best-album">–ü–æ–ø—É–ª—è—Ä–Ω—ã–µ –∞–ª—å–±–æ–º—ã</h2>
    <div class="music__cards-wrapper">


        {% for album in albums %}
            <div class="music__card-wrapper">
                {% if album.cover %}
                    <img class="music__img_album" src="{{ album.cover.url }}"  alt="{{ album.title }}">
                {% else %}
                    <img class="music__img_album" src="{% static 'no-image.png' %}" alt="–ù–µ—Ç –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è">
                {% endif %}
                <h5 class="music__album-title">{{album.title}}</h5>
                <a class="music__artist-title_link" href="{% url 'music:music' %}"></a>
            </div>
        {% endfor %}

    </div>
    <!-- –ê–õ–¨–ë–û–ú–´ –§–ò–ù–ò–® -->





    <!-- –ü–æ–ø—É–ª—è—Ä–Ω—ã–µ –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª–∏ –§–ò–ù–ò–® -->
    <h2 class="music__best-artist">–ü–æ–ø—É–ª—è—Ä–Ω—ã–µ –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª–∏</h2>
    <div class="music__cards-wrapper">

        {% for artist in artists %}
            <div class="music__card-wrapper">
                    <div class="music__imgs-wrapper">
                            {% if artist.image %}
                                <img class="music__img_album" src="{{ artist.image.url }}"  alt="{{ album.title }}">
                            {% else %}
                                <img class="music__img_album" src="{% static 'no-image.png' %}" alt="–ù–µ—Ç –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è">
                            {% endif %}
                    </div>
                    <div class="music__song-wrapper music__song-wrapper-link">
                        <h5 class="music__artist-title">{{ artist.name }}</h5>
                    </div>
                    <a class="music__artist-title_link" href="{% url 'music:artist_songs_view' artist.id %}">–ü–æ–¥—Ä–æ–±–Ω–µ–µ</a>

            </div>
        {% endfor %}
    </div>
    <!-- –ü–æ–ø—É–ª—è—Ä–Ω—ã–µ –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª–∏ –§–ò–ù–ò–® -->




    <!-- –ü–ê–ì–ò–ù–ê–¶–ò–Ø –°–¢–ê–†–¢ -->
    <nav>
      <ul class="pagination">
        {% if page_obj.has_previous %}
          <li class="page-item"><a class="page-link" href="?page={{ page_obj.previous_page_number }}">–ü—Ä–µ–¥—ã–¥—É—â–∞—è</a></li>
        {% endif %}
        {% for num_page in page_obj.paginator.page_range %}
          {% if num_page == page_obj.number %}
              <li class="page-item active"><a class="page-link" href="#">{{ num_page }}</a></li>
          {% else %}
              <li class="page-item"><a class="page-link" href="?page={{ num_page }}">{{ num_page }}</a></li>
          {% endif %}
        {% endfor %}
        {% if page_obj.has_next %}
          <li class="page-item"><a class="page-link" href="?page={{ page_obj.next_page_number }}">–°–ª–µ–¥—É—é—â–∞—è</a></li>
        {% endif %}
      </ul>
    </nav>
    <!-- –ü–ê–ì–ò–ù–ê–¶–ò–Ø –§–ò–ù–ò–® -->
</div>

{% endblock %}




