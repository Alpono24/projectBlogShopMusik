{% extends "base.html" %}
{% load static %}
{% block title %}–ú—É–∑—ã–∫–∞{% endblock %}
{% block content %}

    <h1 class="title_page">{{ title }}</h1>

   <!-- –ü–û–õ–ï –ü–û–ò–°–ö–ê –ü–ï–°–ù–ò –°–¢–ê–†–¢ -->
    <form method="get" class="search-form">
        <div class="search-container">
            <input type="text" name="q" value="{{ request.GET.q }}" placeholder="–ü–æ–∏—Å–∫ –ø–æ –ø–µ—Å–Ω–µ –∏–ª–∏ –∞—Ä—Ç–∏—Å—Ç—É –∏–ª–∏ –∞–ª—å–±–æ–º—É –∏–ª–∏ –ø–æ –∂–∞–Ω—Ä—É.."
                   class="search-input">
            <button class="search-button" type="submit">üîç –ù–∞–π—Ç–∏</button>
        </div>
    </form>
   <!-- –ü–û–õ–ï –ü–û–ò–°–ö–ê –ü–ï–°–ù–ò –§–ò–ù–ò–® -->

    <!-- –§–ò–õ–¨–¢–† –ü–û –ñ–ê–ù–†–ê–ú –°–¢–ê–†–¢ -->
        <div class="music_category__styles">
            <strong>–ñ–∞–Ω—Ä—ã:</strong>
            <a class="music__category_buttons" href="{% url 'music:music' %}">–í—Å–µ</a>
            {% if genres %}
                {% for genre in genres %}
                    <a class="music__category_buttons" href="?genre={{ genre.id }}">
                        {{ genre.name }}
                    </a>
                {% endfor %}
            {% else %}
                <p>–ù–µ—Ç –∂–∞–Ω—Ä–æ–≤</p>
            {% endif %}
        </div>
    <!-- –§–ò–õ–¨–¢–† –ü–û –ñ–ê–ù–†–ê–ú –§–ò–ù–ò–® -->

    <!-- –°–ü–ò–°–û–ö –ü–ï–°–ï–ù –°–¢–ê–†–¢ -->

    <div class="music__cards-wrapper">
        {% for song in songs %}
            <div class="music__card-wrapper">
                    <div class="music__imgs-wrapper">
                        {% if song.album.cover %}
                            <img class="music__img_song" src="{{ song.album.cover.url }}" 
                                 alt="{{ song.title}}">
                        {% else %}
                            <img class="music__img_song" src="{% static 'no-image.png' %}" alt="–ù–µ—Ç –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è">
                        {% endif %}
                    </div>
                    <div class="music__song-wrapper">
                        <div class="music__info_song">
                            <h5 class="music__song-title">{{ song.title }}</h5>
                            <p class="music__song-info">
                                <strong class="music__song-artist">–ê—Ä—Ç–∏—Å—Ç:</strong> {{ song.artist.name}} <br>
                                <strong class="music__song-album">–ê–ª—å–±–æ–º:</strong> {{ song.album.title }} <br>
                                <strong class="music__song-genre">–ñ–∞–Ω—Ä:</strong> {{ song.genre.name }}
                            </p>
                            {% if song.audio_file %}
                                <audio  class="music__song-audio" controls preload="none">
                                    <source src="{{ song.audio_file.url }}" type="audio/mpeg">
                                    –í–∞—à –±—Ä–∞—É–∑–µ—Ä –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –∞—É–¥–∏–æ.
                                </audio>
                            {% else %}
                                <p class="music__song-audio-absent">–ê—É–¥–∏–æ—Ñ–∞–π–ª –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç</p>
                            {% endif %}
                        </div>
                    </div>
                
            </div>
        {% empty %}
            <p class="music__no-songs-available">–ù–µ—Ç –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –ø–µ—Å–µ–Ω.</p>
        {% endfor %}
    </div>
    <!-- –°–ü–ò–°–û–ö –ü–ï–°–ï–ù –§–ò–ù–ò–®–¨ -->


    <!-- –ü–ê–ì–ò–ù–ê–¶–ò–Ø –°–¢–ê–†–¢ -->
    <nav>
      <ul class="pagination">
        {% if page_obj.has_previous %}
          <li class="page-item"><a class="page-link" href="?page={{ page_obj.previous_page_number }}">–ü—Ä–µ–¥—ã–¥—É—â–∞—è</a></li>
        {% endif %}
        {% for num_page in page_obj.paginator.page_range %}
          {% if num_page == page_obj.number %}
              <li class="page-item active"><a class="page-link" href="#">{{ num_page }}</a></li>
          {% else %}
              <li class="page-item"><a class="page-link" href="?page={{ num_page }}">{{ num_page }}</a></li>
          {% endif %}
        {% endfor %}
        {% if page_obj.has_next %}
          <li class="page-item"><a class="page-link" href="?page={{ page_obj.next_page_number }}">–°–ª–µ–¥—É—é—â–∞—è</a></li>
        {% endif %}
      </ul>
    </nav>
    <!-- –ü–ê–ì–ò–ù–ê–¶–ò–Ø –§–ò–ù–ò–® -->


{% endblock %}




